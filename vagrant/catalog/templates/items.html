{% extends "main.html" %}

{% block content %}
{% include "header.html" %}

{% include "catalog_header.html" %}
{% include "catagory_header.html" %}

<div style="width:400px;margin:0 auto;">
    {% if catalog.user_id == session.get('user_id') %}
    <a href="{{url_for('create_item', catagory_id=catagory.id)}}"><button>Create new Item</button></a> &nbsp; &nbsp; 
    <a href="{{url_for('delete_catagory', catagory_id=catagory.id)}}"><button>Delete Catagory</button></a>
    {% endif %}
</div>
<br>
<hr>
<table style="width:930px;margin:0 auto;">
{% for items in get_item_rows(catagory.id) %}
<tr>
{% if len(items) %}
<td style="width:33%;text-align:center;vertical-align:top;">
    <a href="{{url_for('show_item', item_id=items[0].id)}}">
        {% if items[0].item_image %}
            <div class="width-3 height-3 div-image" style="background-image:url({{url_for('uploaded_file', filename=items[0].item_image)}});"></div>
        {% else %}
            <div class="width-3 height-3" style="background-color:#dddddd;">
            {{items[0].name}}
            </div>
        {%endif%}
        <br>
        <strong>{{items[0].name}}</strong><br>
        {{items[0].description}}<br>
    </a>
    {% if catalog.user_id == session.get('user_id') %}
      <a href="{{url_for('delete_item', item_id=items[0].id)}}"><button>Delete Item</button></a> &nbsp;
      <a href="{{url_for('edit_item', item_id = items[0].id)}}"><button>Edit Item</button></a>
    {%endif%}
</td>
{% endif %}
{% if len(items) > 1%}
<td style="width:33%;text-align:center;vertical-align:top;">
    <a href="{{url_for('show_item', item_id=items[1].id)}}">
        {% if items[1].item_image %}
        <div style="width:300px;height:300px;background-image:url({{url_for('uploaded_file', filename=items[1].item_image)}});background-size:100%;background-repeat:no-repeat;">
        </div>
        {% else %}
        <div style="width:300px;height:300px;background-color:#dddddd;">
        </div>
        {%endif%}
        <br>
        <strong>{{items[1].name}}</strong><br>
        {{items[1].description}}<br>
    </a>
    {% if catalog.user_id == session.get('user_id') %}
    <a href="{{url_for('delete_item', item_id=items[1].id)}}"><button>Delete Item</button></a> &nbsp;
    <a href="{{url_for('edit_item', item_id = items[1].id)}}"><button>Edit Item</button></a>
    {%endif%}
</td>
{% else %}
<td style="width:33%;"></td>
{% endif %}
{% if len(items) > 2 %}
<td style="width:33%;text-align:center;vertical-align:top;">
    <a href="{{url_for('show_item', item_id=items[2].id)}}">
        {% if items[2].item_image %}
        <div style="width:300px;height:300px;background-image:url({{url_for('uploaded_file', filename=items[2].item_image)}});background-size:100%;background-repeat:no-repeat;">
        </div>
        {% else %}
        <div style="width:300px;height:300px;background-color:#dddddd;">
        </div>
        {%endif%}
        <br>
        <strong>{{items[2].name}}</strong><br>
        {{items[2].description}}<br>
    </a>
    {% if catalog.user_id == session.get('user_id') %}
    <a href="{{url_for('delete_item', item_id=items[2].id)}}"><button>Delete Item</button></a> &nbsp;
    <a href="{{url_for('edit_item', item_id = items[2].id)}}"><button>Edit Item</button></a>
    {%endif%}
</td>
{% else %}
<td style="width:33%;"></td>
{% endif %}
</tr>
{% endfor %}
</table>

{% endblock %} 

